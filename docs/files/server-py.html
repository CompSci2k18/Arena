<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Server - The Arena</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script language=JavaScript src="../javascript/main.js"></script><script language=JavaScript src="../javascript/prettify.js"></script><script language=JavaScript src="../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad();prettyPrint();"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.52 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CClass"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="Server"></a>Server</h1><div class=CBody><p>A custom server written in Python3.4 for use as the backend for this game.&nbsp; Uses a simple protocol when receiving messages from the players.&nbsp; Multithreaded for increased speed, especially during the actual game.</p><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#Server" >Server</a></td><td class=SDescription>A custom server written in Python3.4 for use as the backend for this game. </td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Server.Constructors" >Constructors</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Server.__init__" id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">__init__</a></td><td class=SDescription>Initialises the server and binds it to the host and port specified</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Server.Variables" >Variables</a></td><td class=SDescription></td></tr><tr class="SVariable SIndent2 SMarked"><td class=SEntry><a href="#Server.host" id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">host</a></td><td class=SDescription>The address of the host. </td></tr><tr class="SVariable SIndent2"><td class=SEntry><a href="#Server.port" id=link3 onMouseOver="ShowTip(event, 'tt3', 'link3')" onMouseOut="HideTip('tt3')">port</a></td><td class=SDescription>The port number the socket will bind to. </td></tr><tr class="SVariable SIndent2 SMarked"><td class=SEntry><a href="#Server.sock" id=link4 onMouseOver="ShowTip(event, 'tt4', 'link4')" onMouseOut="HideTip('tt4')">sock</a></td><td class=SDescription>The <a href="datatypes-txt.html#Socket" class=LType id=link5 onMouseOver="ShowTip(event, 'tt5', 'link5')" onMouseOut="HideTip('tt5')">Socket</a> the server listens on</td></tr><tr class="SVariable SIndent2"><td class=SEntry><a href="#Server.started" id=link6 onMouseOver="ShowTip(event, 'tt6', 'link6')" onMouseOut="HideTip('tt6')">started</a></td><td class=SDescription>False while the server is still in the lobby, True once game starts</td></tr><tr class="SVariable SIndent2 SMarked"><td class=SEntry><a href="#Server.host_start" id=link7 onMouseOver="ShowTip(event, 'tt7', 'link7')" onMouseOut="HideTip('tt7')">host_start</a></td><td class=SDescription>False until the host clicks the Start Game button.</td></tr><tr class="SVariable SIndent2"><td class=SEntry><a href="#Server.players" id=link8 onMouseOver="ShowTip(event, 'tt8', 'link8')" onMouseOut="HideTip('tt8')">players</a></td><td class=SDescription><a href="datatypes-txt.html#List" class=LType id=link9 onMouseOver="ShowTip(event, 'tt9', 'link9')" onMouseOut="HideTip('tt9')">List</a> of player JSON objects in the lobby</td></tr><tr class="SVariable SIndent2 SMarked"><td class=SEntry><a href="#Server.lobby_size" id=link10 onMouseOver="ShowTip(event, 'tt10', 'link10')" onMouseOut="HideTip('tt10')">lobby_size</a></td><td class=SDescription>The amount of players currently in the lobby</td></tr><tr class="SVariable SIndent2"><td class=SEntry><a href="#Server.tokens" id=link11 onMouseOver="ShowTip(event, 'tt11', 'link11')" onMouseOut="HideTip('tt11')">tokens</a></td><td class=SDescription>Dict of usernames against their tokens</td></tr><tr class="SVariable SIndent2 SMarked"><td class=SEntry><a href="#Server.coords" id=link12 onMouseOver="ShowTip(event, 'tt12', 'link12')" onMouseOut="HideTip('tt12')">coords</a></td><td class=SDescription><a href="datatypes-txt.html#List" class=LType id=link13 onMouseOver="ShowTip(event, 'tt9', 'link13')" onMouseOut="HideTip('tt9')">List</a> of <a href="datatypes-txt.html#Coordinates" class=LType id=link14 onMouseOver="ShowTip(event, 'tt13', 'link14')" onMouseOut="HideTip('tt13')">Coordinates</a> objects players can spawn in</td></tr><tr class="SVariable SIndent2"><td class=SEntry><a href="#Server.damages" id=link15 onMouseOver="ShowTip(event, 'tt14', 'link15')" onMouseOut="HideTip('tt14')">damages</a></td><td class=SDescription>Dict of player indices to damage objects they have received since they last updated</td></tr><tr class="SVariable SIndent2 SMarked"><td class=SEntry><a href="#Server.gameOver" id=link16 onMouseOver="ShowTip(event, 'tt15', 'link16')" onMouseOut="HideTip('tt15')">gameOver</a></td><td class=SDescription>Flag for whether the game has ended or not</td></tr><tr class="SVariable SIndent2"><td class=SEntry><a href="#Server.playerStats" id=link17 onMouseOver="ShowTip(event, 'tt16', 'link17')" onMouseOut="HideTip('tt16')">playerStats</a></td><td class=SDescription>An ordered array of the players who died, in order</td></tr><tr class="SVariable SIndent2 SMarked"><td class=SEntry><a href="#Server.startTime" id=link18 onMouseOver="ShowTip(event, 'tt17', 'link18')" onMouseOut="HideTip('tt17')">startTime</a></td><td class=SDescription>The time at which the game starts</td></tr><tr class="SVariable SIndent2"><td class=SEntry><a href="#Server.player_objects" id=link19 onMouseOver="ShowTip(event, 'tt18', 'link19')" onMouseOut="HideTip('tt18')">player_objects</a></td><td class=SDescription><a href="datatypes-txt.html#List" class=LType id=link20 onMouseOver="ShowTip(event, 'tt9', 'link20')" onMouseOut="HideTip('tt9')">List</a> of the <a href="scripts/arena-js.html#Player" class=LClass id=link21 onMouseOver="ShowTip(event, 'tt19', 'link21')" onMouseOut="HideTip('tt19')">Player</a> objects created in Javascript for all players in the game</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Server.Public_Methods" >Public Methods</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Server.close" id=link22 onMouseOver="ShowTip(event, 'tt20', 'link22')" onMouseOut="HideTip('tt20')">close</a></td><td class=SDescription>Closes the server and releases the socket</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Server.listen" id=link23 onMouseOver="ShowTip(event, 'tt21', 'link23')" onMouseOut="HideTip('tt21')">listen</a></td><td class=SDescription>Listen for incoming connections and pass them off to the handler methods in a new thread</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Server.Private_Methods" >Private Methods</a></td><td class=SDescription>Being developer docs, there are private methods that have been documented here.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Server._handleLobbyConnection" id=link24 onMouseOver="ShowTip(event, 'tt22', 'link24')" onMouseOut="HideTip('tt22')">_handleLobbyConnection</a></td><td class=SDescription>Method run in a separate thread to handle requests while the game is still in the lobby state</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Server._lobbyJoin" id=link25 onMouseOver="ShowTip(event, 'tt23', 'link25')" onMouseOut="HideTip('tt23')">_lobbyJoin</a></td><td class=SDescription>Handler for player joining the lobby</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Server._lobbyQuery" id=link26 onMouseOver="ShowTip(event, 'tt24', 'link26')" onMouseOut="HideTip('tt24')">_lobbyQuery</a></td><td class=SDescription>Handler for AJAX querying the players in the lobby</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Server._lobbyStart" id=link27 onMouseOver="ShowTip(event, 'tt25', 'link27')" onMouseOut="HideTip('tt25')">_lobbyStart</a></td><td class=SDescription>Handler for the host starting the game</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Server._lobbyGetToken" id=link28 onMouseOver="ShowTip(event, 'tt26', 'link28')" onMouseOut="HideTip('tt26')">_lobbyGetToken</a></td><td class=SDescription>If the <a href="cgi-bin/join_game-py.html#Join_Game" class=LFile id=link29 onMouseOver="ShowTip(event, 'tt27', 'link29')" onMouseOut="HideTip('tt27')">Join Game</a> script detects a pre-existing cookie on the browser, it will query the server to check its token to tell if this player already left the lobby and want to rejoin if the lobby has space</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Server._handleGameConnection" id=link30 onMouseOver="ShowTip(event, 'tt28', 'link30')" onMouseOut="HideTip('tt28')">_handleGameConnection</a></td><td class=SDescription>Method run in a separate thread to handle requests while the game is running</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Server._gameStartUp" id=link31 onMouseOver="ShowTip(event, 'tt29', 'link31')" onMouseOut="HideTip('tt29')">_gameStartUp</a></td><td class=SDescription>Handler for players arriving at the game.html page for syncing up player data</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Server._gameUpdate" id=link32 onMouseOver="ShowTip(event, 'tt30', 'link32')" onMouseOut="HideTip('tt30')">_gameUpdate</a></td><td class=SDescription>Handler for the AJAX updating player data for all players connected</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Server._gameOver" id=link33 onMouseOver="ShowTip(event, 'tt31', 'link33')" onMouseOut="HideTip('tt31')">_gameOver</a></td><td class=SDescription>Handler for when the game ends</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Server._generateHttpResponse" id=link34 onMouseOver="ShowTip(event, 'tt32', 'link34')" onMouseOut="HideTip('tt32')">_generateHttpResponse</a></td><td class=SDescription>Generates a HTTP response with the headers in the list Headers can easily be added or removed as needed</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Server._generateColour" id=link35 onMouseOver="ShowTip(event, 'tt33', 'link35')" onMouseOut="HideTip('tt33')">_generateColour</a></td><td class=SDescription>Generate a random colour for a player</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Server._updateStats" id=link36 onMouseOver="ShowTip(event, 'tt34', 'link36')" onMouseOut="HideTip('tt34')">_updateStats</a></td><td class=SDescription>Updates the stats for the game. </td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Server._generateStatsFile" id=link37 onMouseOver="ShowTip(event, 'tt35', 'link37')" onMouseOut="HideTip('tt35')">_generateStatsFile</a></td><td class=SDescription>Generates a shelf file named &lsquo;stats&rsquo;, which stores the stats from the previous games</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Server.Constructors"></a>Constructors</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Server.__init__"></a>__init__</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def __init__(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>host,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>port</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Initialises the server and binds it to the host and port specified</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>string host</td><td class=CDLDescription>The host ip of the server.</td></tr><tr><td class=CDLEntry>int port</td><td class=CDLDescription>The port number of the server.&nbsp; Default is 44444</td></tr></table></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Server.Variables"></a>Variables</h3></div></div>

<div class="CVariable"><div class=CTopic><h3 class=CTitle><a name="Server.host"></a>host</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.host</td></tr></table></blockquote><p>The address of the host.&nbsp; Generated by this program</p></div></div></div>

<div class="CVariable"><div class=CTopic><h3 class=CTitle><a name="Server.port"></a>port</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.port</td></tr></table></blockquote><p>The port number the socket will bind to.&nbsp; Default 44444.</p></div></div></div>

<div class="CVariable"><div class=CTopic><h3 class=CTitle><a name="Server.sock"></a>sock</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.sock</td></tr></table></blockquote><p>The <a href="datatypes-txt.html#Socket" class=LType id=link38 onMouseOver="ShowTip(event, 'tt5', 'link38')" onMouseOut="HideTip('tt5')">Socket</a> the server listens on</p></div></div></div>

<div class="CVariable"><div class=CTopic><h3 class=CTitle><a name="Server.started"></a>started</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.started</td></tr></table></blockquote><p>False while the server is still in the lobby, True once game starts</p></div></div></div>

<div class="CVariable"><div class=CTopic><h3 class=CTitle><a name="Server.host_start"></a>host_start</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.host_start</td></tr></table></blockquote><p>False until the host clicks the Start Game button.</p></div></div></div>

<div class="CVariable"><div class=CTopic><h3 class=CTitle><a name="Server.players"></a>players</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.players</td></tr></table></blockquote><p><a href="datatypes-txt.html#List" class=LType id=link39 onMouseOver="ShowTip(event, 'tt9', 'link39')" onMouseOut="HideTip('tt9')">List</a> of player JSON objects in the lobby</p></div></div></div>

<div class="CVariable"><div class=CTopic><h3 class=CTitle><a name="Server.lobby_size"></a>lobby_size</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.lobby_size</td></tr></table></blockquote><p>The amount of players currently in the lobby</p></div></div></div>

<div class="CVariable"><div class=CTopic><h3 class=CTitle><a name="Server.tokens"></a>tokens</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.tokens</td></tr></table></blockquote><p>Dict of usernames against their tokens</p></div></div></div>

<div class="CVariable"><div class=CTopic><h3 class=CTitle><a name="Server.coords"></a>coords</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.coords</td></tr></table></blockquote><p><a href="datatypes-txt.html#List" class=LType id=link40 onMouseOver="ShowTip(event, 'tt9', 'link40')" onMouseOut="HideTip('tt9')">List</a> of <a href="datatypes-txt.html#Coordinates" class=LType id=link41 onMouseOver="ShowTip(event, 'tt13', 'link41')" onMouseOut="HideTip('tt13')">Coordinates</a> objects players can spawn in</p></div></div></div>

<div class="CVariable"><div class=CTopic><h3 class=CTitle><a name="Server.damages"></a>damages</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.damages</td></tr></table></blockquote><p>Dict of player indices to damage objects they have received since they last updated</p></div></div></div>

<div class="CVariable"><div class=CTopic><h3 class=CTitle><a name="Server.gameOver"></a>gameOver</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.gameOver</td></tr></table></blockquote><p>Flag for whether the game has ended or not</p></div></div></div>

<div class="CVariable"><div class=CTopic><h3 class=CTitle><a name="Server.playerStats"></a>playerStats</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.playerStats</td></tr></table></blockquote><p>An ordered array of the players who died, in order</p></div></div></div>

<div class="CVariable"><div class=CTopic><h3 class=CTitle><a name="Server.startTime"></a>startTime</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.startTime</td></tr></table></blockquote><p>The time at which the game starts</p></div></div></div>

<div class="CVariable"><div class=CTopic><h3 class=CTitle><a name="Server.player_objects"></a>player_objects</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.player_objects</td></tr></table></blockquote><p><a href="datatypes-txt.html#List" class=LType id=link42 onMouseOver="ShowTip(event, 'tt9', 'link42')" onMouseOut="HideTip('tt9')">List</a> of the <a href="scripts/arena-js.html#Player" class=LClass id=link43 onMouseOver="ShowTip(event, 'tt19', 'link43')" onMouseOut="HideTip('tt19')">Player</a> objects created in Javascript for all players in the game</p><h4 class=CHeading>Note</h4><p>They are <a href="scripts/arena-js.html#Player" class=LClass id=link44 onMouseOver="ShowTip(event, 'tt19', 'link44')" onMouseOut="HideTip('tt19')">Player</a> objects in JavaScript, but Python stores them as dicts</p></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Server.Public_Methods"></a>Public Methods</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Server.close"></a>close</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def close(</td><td class="PParameter  prettyprint " nowrap>self</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Closes the server and releases the socket</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Server.listen"></a>listen</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def listen(</td><td class="PParameter  prettyprint " nowrap>self</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Listen for incoming connections and pass them off to the handler methods in a new thread</p></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Server.Private_Methods"></a>Private Methods</h3><div class=CBody><h4 class=CHeading>Note</h4><p>Being developer docs, there are private methods that have been documented here.</p><p>Any method prefixed with _ is considered private in Python by convention, and should not be called outside of the containing class</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Server._handleLobbyConnection"></a>_handleLobbyConnection</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _handleLobbyConnection(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>client,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>address</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Method run in a separate thread to handle requests while the game is still in the lobby state</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Socket client</td><td class=CDLDescription>The <a href="datatypes-txt.html#Socket" class=LType id=link45 onMouseOver="ShowTip(event, 'tt5', 'link45')" onMouseOut="HideTip('tt5')">Socket</a> to send response through</td></tr><tr><td class=CDLEntry>Tuple[string, int] address</td><td class=CDLDescription><a href="datatypes-txt.html#Tuple" class=LType id=link46 onMouseOver="ShowTip(event, 'tt36', 'link46')" onMouseOut="HideTip('tt36')">Tuple</a> containing address and port of the client</td></tr></table><h4 class=CHeading>Returns</h4><p>The results of <a href="#Server._lobbyJoin" class=LFunction id=link47 onMouseOver="ShowTip(event, 'tt23', 'link47')" onMouseOut="HideTip('tt23')">_lobbyJoin</a>, <a href="#Server._lobbyQuery" class=LFunction id=link48 onMouseOver="ShowTip(event, 'tt24', 'link48')" onMouseOut="HideTip('tt24')">_lobbyQuery</a>, or <a href="#Server._lobbyStart" class=LFunction id=link49 onMouseOver="ShowTip(event, 'tt25', 'link49')" onMouseOut="HideTip('tt25')">_lobbyStart</a>, depending on the message from the client</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Server._lobbyJoin"></a>_lobbyJoin</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _lobbyJoin(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>client,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>address,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>msg</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Handler for player joining the lobby</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Socket client</td><td class=CDLDescription>The <a href="datatypes-txt.html#Socket" class=LType id=link50 onMouseOver="ShowTip(event, 'tt5', 'link50')" onMouseOut="HideTip('tt5')">Socket</a> to send response through</td></tr><tr><td class=CDLEntry>Tuple[string, int] address</td><td class=CDLDescription><a href="datatypes-txt.html#Tuple" class=LType id=link51 onMouseOver="ShowTip(event, 'tt36', 'link51')" onMouseOut="HideTip('tt36')">Tuple</a> containing address and port of the client</td></tr><tr><td class=CDLEntry>string msg</td><td class=CDLDescription>The msg that was sent by the client Includes the username that the player has chosen</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>string response</td><td class=CDLDescription>Either &lsquo;lobby full&rsquo; if the lobby is full, or &lsquo;joined=&rsquo; + the index of the player in the array <a href="#Server.players" class=LVariable id=link52 onMouseOver="ShowTip(event, 'tt8', 'link52')" onMouseOut="HideTip('tt8')">players</a></td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Server._lobbyQuery"></a>_lobbyQuery</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _lobbyQuery(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>client,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>address,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>msg</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Handler for AJAX querying the players in the lobby</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Socket client</td><td class=CDLDescription>The <a href="datatypes-txt.html#Socket" class=LType id=link53 onMouseOver="ShowTip(event, 'tt5', 'link53')" onMouseOut="HideTip('tt5')">Socket</a> to send response through</td></tr><tr><td class=CDLEntry>Tuple[string, int] address</td><td class=CDLDescription><a href="datatypes-txt.html#Tuple" class=LType id=link54 onMouseOver="ShowTip(event, 'tt36', 'link54')" onMouseOut="HideTip('tt36')">Tuple</a> containing address and port of the client</td></tr><tr><td class=CDLEntry>string msg</td><td class=CDLDescription>The msg that was sent by the client Includes the index of the player in the list of players</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>List players</td><td class=CDLDescription><a href="datatypes-txt.html#List" class=LType id=link55 onMouseOver="ShowTip(event, 'tt9', 'link55')" onMouseOut="HideTip('tt9')">List</a> of player objects currently in the lobby</td></tr><tr><td class=CDLEntry>boolean started</td><td class=CDLDescription>False if the game hasn&rsquo;t started, True otherwise</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Server._lobbyStart"></a>_lobbyStart</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _lobbyStart(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>client,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>address,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>msg</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Handler for the host starting the game</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Socket client</td><td class=CDLDescription>The <a href="datatypes-txt.html#Socket" class=LType id=link56 onMouseOver="ShowTip(event, 'tt5', 'link56')" onMouseOut="HideTip('tt5')">Socket</a> to send response through</td></tr><tr><td class=CDLEntry>Tuple[string, int] address</td><td class=CDLDescription><a href="datatypes-txt.html#Tuple" class=LType id=link57 onMouseOver="ShowTip(event, 'tt36', 'link57')" onMouseOut="HideTip('tt36')">Tuple</a> containing address and port of the client</td></tr><tr><td class=CDLEntry>string msg</td><td class=CDLDescription>The msg that was sent by the client Includes the index of the player in the list of players</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>boolean ready</td><td class=CDLDescription>True if all players in the lobby are ready to start, else False</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Server._lobbyGetToken"></a>_lobbyGetToken</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _lobbyGetToken(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>client,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>address,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>msg</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>If the <a href="cgi-bin/join_game-py.html#Join_Game" class=LFile id=link58 onMouseOver="ShowTip(event, 'tt27', 'link58')" onMouseOut="HideTip('tt27')">Join Game</a> script detects a pre-existing cookie on the browser, it will query the server to check its token to tell if this player already left the lobby and want to rejoin if the lobby has space</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Socket client</td><td class=CDLDescription>The <a href="datatypes-txt.html#Socket" class=LType id=link59 onMouseOver="ShowTip(event, 'tt5', 'link59')" onMouseOut="HideTip('tt5')">Socket</a> to send response through</td></tr><tr><td class=CDLEntry>Tuple[string, int] address</td><td class=CDLDescription><a href="datatypes-txt.html#Tuple" class=LType id=link60 onMouseOver="ShowTip(event, 'tt36', 'link60')" onMouseOut="HideTip('tt36')">Tuple</a> containing address and port of the client</td></tr><tr><td class=CDLEntry>string msg</td><td class=CDLDescription>The msg that was sent by the client Includes the index of the player in the list of players</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>string token</td><td class=CDLDescription>The token of the player who sent the request</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Server._handleGameConnection"></a>_handleGameConnection</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _handleGameConnection(</td><td class="PParameter  prettyprint " nowrap>self,</td><td class="PDefaultValuePrefix  prettyprint ">&nbsp;&nbsp;</td><td class="PDefaultValue  prettyprint " width=100%></td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>client,</td><td class="PDefaultValuePrefix  prettyprint ">&nbsp;&nbsp;</td><td class="PDefaultValue  prettyprint " width=100%></td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>address,</td><td class="PDefaultValuePrefix  prettyprint ">&nbsp;&nbsp;</td><td class="PDefaultValue  prettyprint " width=100%></td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>repeat</td><td class="PDefaultValuePrefix  prettyprint ">&nbsp;=&nbsp;</td><td class="PDefaultValue  prettyprint " width=100%>True</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Method run in a separate thread to handle requests while the game is running</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Socket client</td><td class=CDLDescription>The <a href="datatypes-txt.html#Socket" class=LType id=link61 onMouseOver="ShowTip(event, 'tt5', 'link61')" onMouseOut="HideTip('tt5')">Socket</a> to send response through</td></tr><tr><td class=CDLEntry>Tuple[string, int] address</td><td class=CDLDescription><a href="datatypes-txt.html#Tuple" class=LType id=link62 onMouseOver="ShowTip(event, 'tt36', 'link62')" onMouseOut="HideTip('tt36')">Tuple</a> containing address and port of the client</td></tr><tr><td class=CDLEntry>boolean repeat</td><td class=CDLDescription>Due to issues with http sockets, allow one re-run of this handler to ensure message is received</td></tr></table><h4 class=CHeading>Returns</h4><p>The results of <a href="#Server._gameStartUp" class=LFunction id=link63 onMouseOver="ShowTip(event, 'tt29', 'link63')" onMouseOut="HideTip('tt29')">_gameStartUp</a> or <a href="#Server._gameUpdate" class=LFunction id=link64 onMouseOver="ShowTip(event, 'tt30', 'link64')" onMouseOut="HideTip('tt30')">_gameUpdate</a>, depending on the message from the client</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Server._gameStartUp"></a>_gameStartUp</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _gameStartUp(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>client,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>address,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>msg</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Handler for players arriving at the game.html page for syncing up player data</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Socket client</td><td class=CDLDescription>The <a href="datatypes-txt.html#Socket" class=LType id=link65 onMouseOver="ShowTip(event, 'tt5', 'link65')" onMouseOut="HideTip('tt5')">Socket</a> to send response through</td></tr><tr><td class=CDLEntry>Tuple[string, int] address</td><td class=CDLDescription><a href="datatypes-txt.html#Tuple" class=LType id=link66 onMouseOver="ShowTip(event, 'tt36', 'link66')" onMouseOut="HideTip('tt36')">Tuple</a> containing address and port of the client</td></tr><tr><td class=CDLEntry>string msg</td><td class=CDLDescription>The message that was sent by the client Includes the index of the player in the list of players</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>array players</td><td class=CDLDescription>Starting data for all players, to be turned into <a href="scripts/arena-js.html#Player" class=LClass id=link67 onMouseOver="ShowTip(event, 'tt19', 'link67')" onMouseOut="HideTip('tt19')">Player</a> objects in the JavaScript</td></tr><tr><td class=CDLEntry>boolean ready</td><td class=CDLDescription>True if all players have run this method, else False</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Server._gameUpdate"></a>_gameUpdate</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _gameUpdate(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>client,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>address,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>msg</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Handler for the AJAX updating player data for all players connected</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Socket client</td><td class=CDLDescription>The <a href="datatypes-txt.html#Socket" class=LType id=link68 onMouseOver="ShowTip(event, 'tt5', 'link68')" onMouseOut="HideTip('tt5')">Socket</a> to send response through</td></tr><tr><td class=CDLEntry>Tuple[string, int] address</td><td class=CDLDescription><a href="datatypes-txt.html#Tuple" class=LType id=link69 onMouseOver="ShowTip(event, 'tt36', 'link69')" onMouseOut="HideTip('tt36')">Tuple</a> containing address and port of the client</td></tr><tr><td class=CDLEntry>string msg</td><td class=CDLDescription>The msg that was sent by the client Includes a JSON string of the local players data, and the damages done by the local player</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>array players</td><td class=CDLDescription>The current status of all players in the game</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Server._gameOver"></a>_gameOver</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _gameOver(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>client,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>address,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>msg</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Handler for when the game ends</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Socket client</td><td class=CDLDescription>The <a href="datatypes-txt.html#Socket" class=LType id=link70 onMouseOver="ShowTip(event, 'tt5', 'link70')" onMouseOut="HideTip('tt5')">Socket</a> to send response through</td></tr><tr><td class=CDLEntry>Tuple[string, int] address</td><td class=CDLDescription><a href="datatypes-txt.html#Tuple" class=LType id=link71 onMouseOver="ShowTip(event, 'tt36', 'link71')" onMouseOut="HideTip('tt36')">Tuple</a> containing address and port of the client</td></tr><tr><td class=CDLEntry>string msg</td><td class=CDLDescription>The msg that was sent by the client States that the game is over</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Server._generateHttpResponse"></a>_generateHttpResponse</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _generateHttpResponse(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>body</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Generates a HTTP response with the headers in the list Headers can easily be added or removed as needed</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>string body</td><td class=CDLDescription>The body of the response to be sent back to the client.</td></tr></table><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>string response</td><td class=CDLDescription>An encoded string containing the headers and the body that was passed.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Server._generateColour"></a>_generateColour</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _generateColour(</td><td class="PParameter  prettyprint " nowrap>self</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Generate a random colour for a player</p><h4 class=CHeading>Returns</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>string colour</td><td class=CDLDescription>Random 6-digit hexadecimal string representing a colour value</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Server._updateStats"></a>_updateStats</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _updateStats(</td><td class="PParameter  prettyprint " nowrap>self</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Updates the stats for the game.&nbsp; Run after every call of <a href="#Server._gameUpdate" class=LFunction id=link72 onMouseOver="ShowTip(event, 'tt30', 'link72')" onMouseOut="HideTip('tt30')">_gameUpdate</a></p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="Server._generateStatsFile"></a>_generateStatsFile</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _generateStatsFile(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>endTime</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Generates a shelf file named &lsquo;stats&rsquo;, which stores the stats from the previous games</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>time endTime</td><td class=CDLDescription>The time at which the game ended</td></tr></table></div></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MTitle>The Arena<div class=MSubTitle>4-player fun on your LAN</div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">JavaScript Client Code</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MFile><a href="scripts/arena-js.html">Arena</a></div></div><div class=MEntry><div class=MFile><a href="scripts/lobby-js.html">Lobby Client</a></div></div><div class=MEntry><div class=MFile><a href="index-html.html">Index AJAX</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent2')">Python Backend Code</a><div class=MGroupContent id=MGroupContent2><div class=MEntry><div class=MFile><a href="cgi-bin/game_stats-py.html">Game Stats</a></div></div><div class=MEntry><div class=MFile><a href="cgi-bin/join_game-py.html">Join Game</a></div></div><div class=MEntry><div class=MFile><a href="cgi-bin/lobby-py.html">Lobby</a></div></div><div class=MEntry><div class=MFile id=MSelected>Server</div></div><div class=MEntry><div class=MFile><a href="cgi-bin/start_game-py.html">Start Game</a></div></div></div></div></div><div class=MEntry><div class=MFile><a href="datatypes-txt.html">Datatypes</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent3')">Index</a><div class=MGroupContent id=MGroupContent3><div class=MEntry><div class=MIndex><a href="../index/General.html">Everything</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Classes.html">Classes</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Functions.html">Functions</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Variables.html">Variables</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Types.html">Types</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Files.html">Files</a></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="Classes">Classes</option><option value="Files">Files</option><option value="Functions">Functions</option><option value="Types">Types</option><option value="Variables">Variables</option></select></div></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def __init__(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>host,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>port</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Initialises the server and binds it to the host and port specified</div></div><div class=CToolTip id="tt2"><div class=CVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.host</td></tr></table></blockquote>The address of the host. </div></div><div class=CToolTip id="tt3"><div class=CVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.port</td></tr></table></blockquote>The port number the socket will bind to. </div></div><div class=CToolTip id="tt4"><div class=CVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.sock</td></tr></table></blockquote>The Socket the server listens on</div></div><div class=CToolTip id="tt5"><div class=CType>Python&rsquo;s socket.socket; for managing a socket</div></div><div class=CToolTip id="tt6"><div class=CVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.started</td></tr></table></blockquote>False while the server is still in the lobby, True once game starts</div></div><div class=CToolTip id="tt7"><div class=CVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.host_start</td></tr></table></blockquote>False until the host clicks the Start Game button.</div></div><div class=CToolTip id="tt8"><div class=CVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.players</td></tr></table></blockquote>List of player JSON objects in the lobby</div></div><div class=CToolTip id="tt9"><div class=CType>Python&rsquo;s builtin list</div></div><div class=CToolTip id="tt10"><div class=CVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.lobby_size</td></tr></table></blockquote>The amount of players currently in the lobby</div></div><div class=CToolTip id="tt11"><div class=CVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.tokens</td></tr></table></blockquote>Dict of usernames against their tokens</div></div><div class=CToolTip id="tt12"><div class=CVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.coords</td></tr></table></blockquote>List of Coordinates objects players can spawn in</div></div><div class=CToolTip id="tt13"><div class=CType>Two-tuple containing a pair of (x, y) coordinates</div></div><div class=CToolTip id="tt14"><div class=CVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.damages</td></tr></table></blockquote>Dict of player indices to damage objects they have received since they last updated</div></div><div class=CToolTip id="tt15"><div class=CVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.gameOver</td></tr></table></blockquote>Flag for whether the game has ended or not</div></div><div class=CToolTip id="tt16"><div class=CVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.playerStats</td></tr></table></blockquote>An ordered array of the players who died, in order</div></div><div class=CToolTip id="tt17"><div class=CVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.startTime</td></tr></table></blockquote>The time at which the game starts</div></div><div class=CToolTip id="tt18"><div class=CVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">self.player_objects</td></tr></table></blockquote>List of the Player objects created in Javascript for all players in the game</div></div><div class=CToolTip id="tt19"><div class=CClass>Objects representing the player controlled entity in the game</div></div><div class=CToolTip id="tt20"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def close(</td><td class="PParameter  prettyprint " nowrap>self</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Closes the server and releases the socket</div></div><div class=CToolTip id="tt21"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def listen(</td><td class="PParameter  prettyprint " nowrap>self</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Listen for incoming connections and pass them off to the handler methods in a new thread</div></div><div class=CToolTip id="tt22"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _handleLobbyConnection(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>client,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>address</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Method run in a separate thread to handle requests while the game is still in the lobby state</div></div><div class=CToolTip id="tt23"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _lobbyJoin(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>client,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>address,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>msg</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Handler for player joining the lobby</div></div><div class=CToolTip id="tt24"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _lobbyQuery(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>client,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>address,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>msg</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Handler for AJAX querying the players in the lobby</div></div><div class=CToolTip id="tt25"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _lobbyStart(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>client,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>address,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>msg</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Handler for the host starting the game</div></div><div class=CToolTip id="tt26"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _lobbyGetToken(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>client,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>address,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>msg</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>If the Join Game script detects a pre-existing cookie on the browser, it will query the server to check its token to tell if this player already left the lobby and want to rejoin if the lobby has space</div></div><div class=CToolTip id="tt27"><div class=CFile>Handles join requests from the form on the index page. </div></div><div class=CToolTip id="tt28"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _handleGameConnection(</td><td class="PParameter  prettyprint " nowrap>self,</td><td class="PDefaultValuePrefix  prettyprint ">&nbsp;&nbsp;</td><td class="PDefaultValue  prettyprint " width=100%></td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>client,</td><td class="PDefaultValuePrefix  prettyprint ">&nbsp;&nbsp;</td><td class="PDefaultValue  prettyprint " width=100%></td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>address,</td><td class="PDefaultValuePrefix  prettyprint ">&nbsp;&nbsp;</td><td class="PDefaultValue  prettyprint " width=100%></td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>repeat</td><td class="PDefaultValuePrefix  prettyprint ">&nbsp;=&nbsp;</td><td class="PDefaultValue  prettyprint " width=100%>True</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Method run in a separate thread to handle requests while the game is running</div></div><div class=CToolTip id="tt29"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _gameStartUp(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>client,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>address,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>msg</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Handler for players arriving at the game.html page for syncing up player data</div></div><div class=CToolTip id="tt30"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _gameUpdate(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>client,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>address,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>msg</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Handler for the AJAX updating player data for all players connected</div></div><div class=CToolTip id="tt31"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _gameOver(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>client,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>address,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>msg</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Handler for when the game ends</div></div><div class=CToolTip id="tt32"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _generateHttpResponse(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>body</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Generates a HTTP response with the headers in the list Headers can easily be added or removed as needed</div></div><div class=CToolTip id="tt33"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _generateColour(</td><td class="PParameter  prettyprint " nowrap>self</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Generate a random colour for a player</div></div><div class=CToolTip id="tt34"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _updateStats(</td><td class="PParameter  prettyprint " nowrap>self</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Updates the stats for the game. </div></div><div class=CToolTip id="tt35"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>def _generateStatsFile(</td><td class="PParameter  prettyprint " nowrap>self,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>endTime</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Generates a shelf file named &lsquo;stats&rsquo;, which stores the stats from the previous games</div></div><div class=CToolTip id="tt36"><div class=CType>Python&rsquo;s builtin tuple</div></div><!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>